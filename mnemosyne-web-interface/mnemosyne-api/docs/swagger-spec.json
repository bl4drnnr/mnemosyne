{"openapi":"3.0.0","paths":{"/api/users/forgot-password":{"post":{"operationId":"UsersController_forgotPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordDto"}}}},"responses":{"201":{"description":""}},"tags":["Users"]}},"/api/users/upload-user-photo":{"post":{"operationId":"UsersController_uploadUserPhoto","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadPhotoDto"}}}},"responses":{"201":{"description":""}},"tags":["Users"]}},"/api/users/user-info":{"get":{"operationId":"UsersController_getUserInfo","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]},"patch":{"operationId":"UsersController_updateUserInfo","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserInfoDto"}}}},"responses":{"200":{"description":""}},"tags":["Users"]}},"/api/users/user-security":{"get":{"operationId":"UsersController_getUserSecuritySettings","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/api/confirmation-hash/account-confirmation":{"get":{"operationId":"ConfirmationHashController_confirmAccount","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}},{"name":"language","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Confirmation Hashes"]}},"/api/confirmation-hash/company-account-confirmation":{"post":{"operationId":"ConfirmationHashController_confirmCompanyAccount","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmCompanyAccDto"}}}},"responses":{"201":{"description":""}},"tags":["Confirmation Hashes"]}},"/api/confirmation-hash/company-member-account-confirmation":{"post":{"operationId":"ConfirmationHashController_companyMemberAccountConfirmation","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmCompanyAccDto"}}}},"responses":{"201":{"description":""}},"tags":["Confirmation Hashes"]}},"/api/confirmation-hash/email-change-confirmation":{"post":{"operationId":"ConfirmationHashController_confirmEmailChange","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmEmailChangeDto"}}}},"responses":{"201":{"description":""}},"tags":["Confirmation Hashes"]}},"/api/confirmation-hash/reset-user-password-confirmation":{"post":{"operationId":"ConfirmationHashController_resetUserPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetUserPasswordDto"}}}},"responses":{"201":{"description":""}},"tags":["Confirmation Hashes"]}},"/api/auth/login":{"post":{"operationId":"AuthController_login","summary":"Endpoint is responsible for user login.","parameters":[],"requestBody":{"required":true,"description":"According to the requirements, all users will have to configure MFA for their accounts. Therefore, even tho both MFA codes are optional, at least one of them will be provided.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogInUserDto"}}}},"responses":{"201":{"description":"As a response function returns 2 tokens - refresh and access. Also, as a response user may get a message that either token or phone MFA is required or both of them. It is sent as a message (status 201), not an error.","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/LogInUserResponseDto"},{"$ref":"#/components/schemas/MfaNotSetDto"},{"$ref":"#/components/schemas/RecoveryKeysNotSetDto"},{"$ref":"#/components/schemas/FullMfaRequiredDto"},{"$ref":"#/components/schemas/TokenTwoFaRequiredDto"},{"$ref":"#/components/schemas/PhoneMfaRequiredDto"},{"$ref":"#/components/schemas/WrongCredentialsException"},{"$ref":"#/components/schemas/AccountNotConfirmedException"},{"$ref":"#/components/schemas/SmsExpiredException"},{"$ref":"#/components/schemas/WrongCodeException"}]}}}},"400":{"description":"Bad request responses include wrong provided MFA code, or expired MFA code, or wrong provided credentials.","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/SmsExpiredException"},{"$ref":"#/components/schemas/WrongCredentialsException"},{"$ref":"#/components/schemas/WrongCodeException"}]}}}},"403":{"description":"Forbidden response for login includes only response saying that user account has not been confirmed. It means, that it exists, but user have not clicked the link in the message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountNotConfirmedException"}}}}},"tags":["Authentication"]}},"/api/auth/registration":{"post":{"operationId":"AuthController_registration","summary":"Endpoint is responsible for user registration.","parameters":[],"requestBody":{"required":true,"description":"In order to create an account user has to provide email, password, first name and last name, and accept T&C.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"As a response function returns message about created user.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreatedDto"}}}},"400":{"description":"User gets bad request response in case if user already exists.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAlreadyExistsException"}}}},"403":{"description":"Forbidden response for registration includes only response saying that user has not accepted Terms & Conditions.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TacNotAcceptedException"}}}}},"tags":["Authentication"]}},"/api/auth/logout":{"get":{"operationId":"AuthController_logout","summary":"","status":201,"description":"As a response function returns message about that user was logged out and refresh token cleaned from token.","schema":{"$ref":"#/components/schemas/LoggedOutDto"},"parameters":[],"responses":{"201":{"description":"As a response function returns message about that user was logged out and refresh token cleaned from token.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoggedOutDto"}}}}},"tags":["Authentication"]}},"/api/auth/refresh":{"get":{"operationId":"AuthController_refreshTokens","summary":"Endpoint is responsible for refresh tokens.","parameters":[],"responses":{"201":{"description":"As a response function returns 2 tokens - refresh and access. But in compare with login function, this function always returns 2 tokens, without asking for MFA etc.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogInUserResponseDto"}}}},"400":{"description":"Bad requests can return in case of invalid tokens or corrupted tokens.","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/InvalidTokenException"},{"$ref":"#/components/schemas/CorruptedTokenException"}]}}}},"401":{"description":"Unauthorized error can be returned in case of if token is expired.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExpiredTokenException"}}}}},"tags":["Authentication"]}},"/api/company/create-company":{"post":{"operationId":"CompanyController_createCompany","summary":"Endpoint is responsible for company creation.","parameters":[],"requestBody":{"required":true,"description":"In order to create a company account user has to provide company name, location, website, owner email, list of company members (optional) and accept T&C.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCompanyDto"}}}},"responses":{"201":{"description":"As a response function returns message about created company.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyCreatedDto"}}}},"400":{"description":"Forbidden response for company creation includes only response saying that company has not accepted Terms & Conditions.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TacNotAcceptedException"}}}},"403":{"description":"Forbidden response for company creation includes only response saying that company has not accepted Terms & Conditions.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TacNotAcceptedException"}}}}},"tags":["Company"]}},"/api/roles":{"post":{"operationId":"RolesController_createRole","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRoleDto"}}}},"responses":{"201":{"description":""}},"tags":["Roles"]}},"/api/roles/{value}":{"get":{"operationId":"RolesController_getRoleByValue","parameters":[{"name":"value","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Roles"]}},"/api/roles/grant":{"post":{"operationId":"RolesController_grantRole","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrantRoleDto"}}}},"responses":{"201":{"description":""}},"tags":["Roles"]}},"/api/roles/revoke":{"post":{"operationId":"RolesController_revokeRole","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevokeRoleDto"}}}},"responses":{"201":{"description":""}},"tags":["Roles"]}},"/api/company-users/invite-user":{"post":{"operationId":"CompanyUsersController_inviteUser","parameters":[],"responses":{"201":{"description":""}},"tags":["Company Users"]}},"/api/security/registration-generate-2fa-qr":{"get":{"operationId":"SecurityController_registrationGenerateTwoFaQrCode","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Security"]}},"/api/security/login-generate-2fa-qr":{"post":{"operationId":"SecurityController_loginGenerateTwoFaQrCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginGenerate2faQrDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/generate-2fa-qr":{"get":{"operationId":"SecurityController_generateTwoFaQrCode","parameters":[],"responses":{"200":{"description":""}},"tags":["Security"]}},"/api/security/registration-verify-2fa":{"post":{"operationId":"SecurityController_registrationVerifyTwoFaQrCode","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyTwoFaDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/login-verify-2fa":{"post":{"operationId":"SecurityController_loginVerifyTwoFaQrCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyTwoFaDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/verify-2fa":{"post":{"operationId":"SecurityController_verifyTwoFaQrCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyTwoFaDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/disable-2fa":{"post":{"operationId":"SecurityController_disableTwoFa","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisableTwoFaDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/registration-send-sms-code":{"post":{"operationId":"SecurityController_registrationSendSmsCode","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegistrationSendSmsCodeDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/login-send-sms-code":{"post":{"operationId":"SecurityController_loginSendSmsCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSendSmsDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/send-sms-code":{"post":{"operationId":"SecurityController_sendSmsCode","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegistrationSendSmsCodeDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/hash-send-sms-code":{"get":{"operationId":"SecurityController_hashSendSmsCode","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}},{"name":"language","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Security"]}},"/api/security/get-sms-code":{"get":{"operationId":"SecurityController_getSmsCode","parameters":[{"name":"language","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Security"]}},"/api/security/clear-sms-code":{"post":{"operationId":"SecurityController_clearSmsCode","parameters":[],"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/registration-verify-mobile-phone":{"post":{"operationId":"SecurityController_registrationVerifyMobilePhone","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyMobilePhoneDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/login-verify-mobile-phone":{"post":{"operationId":"SecurityController_loginVerifyMobilePhone","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyMobilePhoneDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/verify-mobile-phone":{"post":{"operationId":"SecurityController_verifyMobilePhone","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyMobilePhoneDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/disable-phone":{"post":{"operationId":"SecurityController_disablePhone","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisableTwoFaDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/security/delete-account":{"delete":{"operationId":"SecurityController_deleteUserAccount","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteAccountDto"}}}},"responses":{"200":{"description":""}},"tags":["Security"]}},"/api/security/change-password":{"patch":{"operationId":"SecurityController_changePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":""}},"tags":["Security"]}},"/api/security/change-email":{"post":{"operationId":"SecurityController_changeEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeEmailDto"}}}},"responses":{"201":{"description":""}},"tags":["Security"]}},"/api/recovery/registration-generate-recovery-keys":{"post":{"operationId":"RecoveryController_registrationGenerateRecoveryKeys","parameters":[{"name":"confirmationHash","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateRecoveryKeysDto"}}}},"responses":{"201":{"description":""}},"tags":["Recovery"]}},"/api/recovery/login-generate-recovery-keys":{"post":{"operationId":"RecoveryController_loginGenerateRecoveryKeys","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginGenerateRecoveryKeysDto"}}}},"responses":{"201":{"description":""}},"tags":["Recovery"]}},"/api/recovery/generate-recovery-keys":{"post":{"operationId":"RecoveryController_generateRecoveryKeys","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateRecoveryKeysDto"}}}},"responses":{"201":{"description":""}},"tags":["Recovery"]}},"/api/recovery/recover-account":{"post":{"operationId":"RecoveryController_recoverUserAccount","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecoverAccountDto"}}}},"responses":{"201":{"description":""}},"tags":["Recovery"]}}},"info":{"title":"Mnemosyne","description":"Documentation of Mnemosyne API.","version":"0.0.1","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"ForgotPasswordDto":{"type":"object","properties":{}},"UploadPhotoDto":{"type":"object","properties":{}},"UpdateUserInfoDto":{"type":"object","properties":{}},"ConfirmCompanyAccDto":{"type":"object","properties":{}},"ConfirmEmailChangeDto":{"type":"object","properties":{}},"ResetUserPasswordDto":{"type":"object","properties":{}},"LogInUserResponseDto":{"type":"object","properties":{"_at":{"type":"string","description":"Access JWT token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlcyI6WyJERUZBVUxUIl0sInVzZXJJZCI6IjU4NGE3MzYzLWYxMmYtNGYxMy04NmQ1LTgxZWEwNzI5Y2I1MSIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE2OTMxMzc2MDYsImV4cCI6MTY5MzE0NDgwNn0.c29vRfkNAbYi1stsn5EsN0N7ruUKrzkZe7RZpUDwu0U"},"_rt":{"type":"string","description":"Refresh JWT token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImQwNjY5MzYxLTc3ODgtNGJlNC05ZWNkLTAxNjcyM2FjMWU2MyIsInR5cGUiOiJyZWZyZXNoIiwiaWF0IjoxNjkzMTM3NjA2LCJleHAiOjE2OTM3NDI0MDZ9.eLt3U9RFbh_iRy1MpH30VIyCSMp6mxEw1Yw9MLEsvGU"}},"required":["_at","_rt"]},"MfaNotSetDto":{"type":"object","properties":{"message":{"type":"string","description":"MFA not set response message","example":"mfa-not-set"}},"required":["message"]},"RecoveryKeysNotSetDto":{"type":"object","properties":{"message":{"type":"string","description":"Recovery keys not set response message","example":"recovery-keys-not-set"}},"required":["message"]},"FullMfaRequiredDto":{"type":"object","properties":{"message":{"type":"string","description":"Full MFA (token + phone) required response message","example":"full-mfa-required"}},"required":["message"]},"TokenTwoFaRequiredDto":{"type":"object","properties":{"message":{"type":"string","description":"Token MFA required response message","example":"token-two-fa-required"}},"required":["message"]},"PhoneMfaRequiredDto":{"type":"object","properties":{"message":{"type":"string","description":"Phone MFA required response message","example":"phone-required"}},"required":["message"]},"WrongCredentialsException":{"type":"object","properties":{"message":{"type":"string","description":"Wrong credentials error message","example":"wrong-credentials"}},"required":["message"]},"AccountNotConfirmedException":{"type":"object","properties":{"message":{"type":"string","description":"Account not confirmed error message","example":"account-not-confirmed"}},"required":["message"]},"SmsExpiredException":{"type":"object","properties":{"message":{"type":"string","description":"SMS expired error message","example":"sms-expired"}},"required":["message"]},"WrongCodeException":{"type":"object","properties":{"message":{"type":"string","description":"Wrong code error message","example":"wrong-code"}},"required":["message"]},"LogInUserDto":{"type":"object","properties":{"email":{"type":"string","description":"Email address","example":"joe@doe.com"},"password":{"type":"string","description":"User password","example":"78ui&*UI"},"phoneCode":{"type":"string","description":"User phone code - MFA","example":"123123"},"mfaCode":{"type":"string","description":"User authentication application code - MFA","example":"123123"}},"required":["email","password"]},"UserCreatedDto":{"type":"object","properties":{"message":{"type":"string","description":"User created response message","example":"user-created"}},"required":["message"]},"UserAlreadyExistsException":{"type":"object","properties":{"message":{"type":"string","description":"User already exists error message","example":"user-already-exists"}},"required":["message"]},"TacNotAcceptedException":{"type":"object","properties":{"message":{"type":"string","description":"T&C not accepted error message","example":"tac-not-accepted"}},"required":["message"]},"CreateUserDto":{"type":"object","properties":{"email":{"type":"string","description":"Email address","example":"joe@doe.com"},"password":{"type":"string","description":"User password","example":"78ui&*UI"},"firstName":{"type":"string","description":"First name","example":"Joe"},"lastName":{"type":"string","description":"Last name","example":"Doe"},"tac":{"type":"boolean","description":"Terms & Conditions","example":"true"},"language":{"type":"string","enum":["ru","pl","en"],"description":"One of 3 available languages"}},"required":["email","password","firstName","lastName","tac"]},"LoggedOutDto":{"type":"object","properties":{"message":{"type":"string","description":"User logged out response message","example":"user-logged-out"}},"required":["message"]},"CorruptedTokenException":{"type":"object","properties":{"message":{"type":"string","description":"Corrupted token error message","example":"corrupted-token"}},"required":["message"]},"InvalidTokenException":{"type":"object","properties":{"message":{"type":"string","description":"Invalid token error message","example":"invalid-token"}},"required":["message"]},"ExpiredTokenException":{"type":"object","properties":{"message":{"type":"string","description":"Token expired error message","example":"token-expired"}},"required":["message"]},"CreateCompanyDto":{"type":"object","properties":{"companyLocation":{"type":"string","description":"Company location","example":"Cupertino, CA 95014"},"companyName":{"type":"string","description":"Company name","example":"Apple Inc."},"companyWebsite":{"type":"string","description":"Company website","example":"apple.com"},"companyOwnerEmail":{"type":"string","description":"Email address","example":"joe@doe.com"},"companyMembers":{"description":"Array of company members","example":[{"email":"tim.cook@icloud.com","role":"ADMIN"}],"type":"array","items":{"type":"array"}},"tac":{"type":"boolean","description":"Terms & Conditions","example":"true"},"language":{"type":"string","enum":["ru","pl","en"],"description":"One of 3 available languages"}},"required":["companyLocation","companyName","companyWebsite","companyOwnerEmail","companyMembers","tac","language"]},"CompanyCreatedDto":{"type":"object","properties":{"message":{"type":"string","description":"Company created response message ","example":"company-created"}},"required":["message"]},"CompanyExistsException":{"type":"object","properties":{"message":{"type":"string","description":"Company already exists error message","example":"company-already-exists"}},"required":["message"]},"CreateRoleDto":{"type":"object","properties":{}},"GrantRoleDto":{"type":"object","properties":{}},"RevokeRoleDto":{"type":"object","properties":{}},"LoginGenerate2faQrDto":{"type":"object","properties":{}},"VerifyTwoFaDto":{"type":"object","properties":{}},"DisableTwoFaDto":{"type":"object","properties":{}},"RegistrationSendSmsCodeDto":{"type":"object","properties":{}},"LoginSendSmsDto":{"type":"object","properties":{}},"VerifyMobilePhoneDto":{"type":"object","properties":{}},"DeleteAccountDto":{"type":"object","properties":{}},"ChangePasswordDto":{"type":"object","properties":{}},"ChangeEmailDto":{"type":"object","properties":{}},"GenerateRecoveryKeysDto":{"type":"object","properties":{}},"LoginGenerateRecoveryKeysDto":{"type":"object","properties":{}},"RecoverAccountDto":{"type":"object","properties":{}}}}}