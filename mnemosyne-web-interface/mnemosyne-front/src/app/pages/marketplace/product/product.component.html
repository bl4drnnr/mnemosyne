<layout-default
  [showHeaderBurger]="false"
>
  <ng-container *transloco="let t">
    <div class="product-container" *ngIf="product">
      <div class="product-area">
        <div class="product-search" (click)="showSearchProductsModal = true">
          <basic-input
            [label]="t('input.marketplaceSearchLabel')"
            [placeholder]="t('input.marketplaceSearchPlaceholder')"
            [inputDescription]="t('input.marketplaceSearchInputDesc')"
          />
        </div>

        <div class="product-navigation">
          <div
            class="product-navigation-wrapper"
            (click)="handleRedirect('marketplace')"
          >
            <img
              class="product-navigation-arrow"
              [ngSrc]="backArrowIcon"
              [width]="60"
              [height]="60"
              alt="close"
            >
            <p>{{ t('product.productGoBack') }}</p>
          </div>
          <div class="product-category-navigation">
            <basic-link
              [label]="t('link.productGoToMainPage')"
              href="/marketplace"
            />
            <p class="product-category-navigation-separator">&gt;</p>
            <basic-link
              [label]="t(translateCategory(product.category))"
              [href]="'marketplace' + '?category=' + product.category"
            />
            <p class="product-category-navigation-separator">&gt;</p>
            <basic-link
              [label]="t(translateSubcategory(product.category, product.subcategory))"
              [href]="'marketplace' + '?category=' + product.category + '&subcategory=' + product.subcategory"
            />
          </div>
        </div>

        <div class="product-content-container">
          <div class="product-main-content">
            <div class="product-pictures"></div>
            <div class="product-desc-block">
              <h1>{{ t('product.productDescTitle') }}</h1>
              <p>{{ product.description }}</p>
              <h1>{{ t('product.productTagsTitle') }}</h1>
              <div class="product-tags">
<!--                <p class="product-tag">Private</p>-->
                <p class="product-tag">{{ t(translateCategory(product.category)) }}</p>
                <p class="product-tag">{{ t(translateSubcategory(product.category, product.subcategory)) }}</p>
              </div>
            </div>
            <div class="product-contact-block">
              <h1>{{ t('product.productContactOwnerTitle') }}</h1>
              <div class="product-contact-info">
                <div class="product-contact-info-block">
                  <img
                    [ngSrc]="userProfilePictureLink"
                    [width]="50"
                    [height]="50"
                    alt="User"
                  >
                  <div class="product-user-info-link">
                    <p>{{ product.productUserFirstName }} {{ product.productUserLastName }}</p>
                    <basic-link
                      [label]="t('link.seeMoreProducts')"
                      [href]="''"
                    />
                  </div>
                </div>
                <div class="product-contact-info-block buttons">
                  <div class="product-contact-info-button">
                    <basic-button
                      [label]="t('button.showContactEmail')"
                    />
                  </div>
                  <basic-button
                    [label]="t('button.showContactPhone')"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="product-additional-content">
            <div class="product-additional-content-block">
              <div class="favorite">
                <p class="product-additional-content-date">
                  {{ transformDate(product.createdAt) }}
                </p>
                <img
                  class="product-favorite-icon"
                  [ngClass]="{ 'active': product.productInFavorites }"
                  [ngSrc]="addToFavoriteIcon"
                  [width]="32"
                  [height]="32"
                  (click)="handleProductFavorite()"
                  alt="Add to favorite"
                >
              </div>
              <div class="products-price-info">
                <h1>{{ product.title }}</h1>
                <h1>{{ product.price }} {{ product.currency }}</h1>
              </div>
              <div class="products-contact-button no-padding">
                <basic-button
                  [label]="t('button.showContactEmail')"
                />
              </div>
              <div class="products-contact-button">
                <basic-button
                  [label]="t('button.showContactPhone')"
                />
              </div>
            </div>
            <div class="product-additional-content-block">
              <h4 class="product-posted-by-title">
                {{ t('product.productPostedBy') }}
              </h4>
              <div class="product-user-info-wrapper">
                <div class="product-user-info">
                  <img
                    [ngSrc]="userProfilePictureLink"
                    [width]="50"
                    [height]="50"
                    alt="User"
                  >
                  <div class="product-user-info-link">
                    <p>{{ product.productUserFirstName }} {{ product.productUserLastName }}</p>
                    <basic-link
                      [label]="t('link.seeMoreProducts')"
                      [href]="''"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="product-additional-content-block">
              <h4 class="product-localization-title">{{ t('product.productLocation') }}</h4>
              <div
                class="product-localization-wrapper"
                (click)="handleExternalRedirect('https://www.google.com/maps/place/' + product.location)"
              >
                <div class="product-location-info">
                  <img
                    [ngSrc]="googleMapsIcon"
                    [width]="50"
                    [height]="50"
                    alt="Google Maps"
                  >
                  <div class="product-localization-link">
                    <p><b>{{ t('product.productLocatedAt') }}:</b></p>
                    <p>{{ product.location }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="product-container">
      <div class="product-area">
        <h1>{{ t('product.similarProducts') }}</h1>
        <div class="similar-products"></div>
      </div>
    </div>
  </ng-container>
</layout-default>

<page-products-modal-search
  [showModal]="showSearchProductsModal"
  (closeModal)="closeSearchProductsModal()"
/>
